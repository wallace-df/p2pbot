(function(e){function t(t){for(var s,o,i=t[0],l=t[1],d=t[2],u=0,b=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(b.length)b.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},r={app:0},a=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var c=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},"17c5":function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"orderId","type":"string"},{"indexed":false,"internalType":"address","name":"tokenContractAddress","type":"address"},{"indexed":false,"internalType":"address","name":"buyerAddress","type":"address"},{"indexed":false,"internalType":"bytes32","name":"buyerHash","type":"bytes32"},{"indexed":false,"internalType":"address","name":"sellerAddress","type":"address"},{"indexed":false,"internalType":"bytes32","name":"sellerHash","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"}],"name":"OrderLocked","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"orderId","type":"string"},{"indexed":false,"internalType":"address","name":"tokenContractAddress","type":"address"},{"indexed":false,"internalType":"address","name":"sellerAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"},{"indexed":false,"internalType":"bool","name":"adminAction","type":"bool"}],"name":"OrderRefunded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"orderId","type":"string"},{"indexed":false,"internalType":"address","name":"tokenContractAddress","type":"address"},{"indexed":false,"internalType":"address","name":"buyerAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"bool","name":"adminAction","type":"bool"}],"name":"OrderReleased","type":"event"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"}],"name":"adminRefundSeller","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"}],"name":"adminReleaseToBuyer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"},{"internalType":"address","name":"_tokenContractAddress","type":"address"},{"internalType":"address","name":"_buyerAddress","type":"address"},{"internalType":"bytes32","name":"_buyerHash","type":"bytes32"},{"internalType":"bytes32","name":"_sellerHash","type":"bytes32"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_fee","type":"uint256"}],"name":"escrowERC20","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"},{"internalType":"address","name":"_buyerAddress","type":"address"},{"internalType":"bytes32","name":"_buyerHash","type":"bytes32"},{"internalType":"bytes32","name":"_sellerHash","type":"bytes32"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_fee","type":"uint256"}],"name":"escrowRBTC","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenContractAddress","type":"address"}],"name":"fees","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenContractAddress","type":"address"}],"name":"isERC20Whitelisted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"}],"name":"orderById","outputs":[{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"address","name":"tokenContractAddress","type":"address"},{"internalType":"address","name":"buyerAddress","type":"address"},{"internalType":"bytes32","name":"buyerHash","type":"bytes32"},{"internalType":"address","name":"sellerAddress","type":"address"},{"internalType":"bytes32","name":"sellerHash","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"fee","type":"uint256"},{"internalType":"enum RSKEscrow.EscrowStatus","name":"status","type":"uint8"},{"internalType":"bool","name":"adminAction","type":"bool"}],"internalType":"struct RSKEscrow.EscrowOrder","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"},{"internalType":"bytes32","name":"_sellerCode","type":"bytes32"}],"name":"refundSeller","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"},{"internalType":"bytes32","name":"_buyerCode","type":"bytes32"}],"name":"releaseToBuyer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenContractAddress","type":"address"},{"internalType":"bool","name":"flag","type":"bool"}],"name":"setWhitelistedERC20Token","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_userAddress","type":"address"}],"name":"userOrders","outputs":[{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"address","name":"tokenContractAddress","type":"address"},{"internalType":"address","name":"buyerAddress","type":"address"},{"internalType":"bytes32","name":"buyerHash","type":"bytes32"},{"internalType":"address","name":"sellerAddress","type":"address"},{"internalType":"bytes32","name":"sellerHash","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"fee","type":"uint256"},{"internalType":"enum RSKEscrow.EscrowStatus","name":"status","type":"uint8"},{"internalType":"bool","name":"adminAction","type":"bool"}],"internalType":"struct RSKEscrow.EscrowOrder[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenContractAddress","type":"address"}],"name":"withdrawFees","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t){},24:function(e,t){},25:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);var s=n("7a23"),r=n("6605"),a=n("5502");const o={key:0,style:{"text-align":"right"}},i={class:"badge bg-dark m-3 fs-5"};function l(e,t,n,r,a,l){const d=Object(s["v"])("router-view");return Object(s["q"])(),Object(s["e"])("div",null,[this.activeConnection?(Object(s["q"])(),Object(s["e"])("div",o,[Object(s["f"])("h2",i,Object(s["x"])(l.activeConnection.networkName)+" - "+Object(s["x"])(e.formatAddress(l.activeConnection.walletAddress)),1)])):Object(s["d"])("",!0),Object(s["h"])(d)])}var d=n("100f"),c=n.n(d),u=n("2eaf"),b=n("31af"),m=n.n(b),f=n("9721"),y=n("8f0a"),p=n("07b1"),h=n("eb2c"),O=n("99e5"),j=n.n(O);const g={development:"https://public-node.testnet.rsk.co",test:"https://public-node.testnet.rsk.co",production:"https://public-node.rsk.co"};var w={nodeURLs:g,networkNames:{development:"RSK Testnet",test:"RSK Testnet",production:"RSK Mainnet"},wallets:{rpcUrls:{development:{31:g["development"]},test:{31:g["test"]},production:{30:g["production"]}},portisOptions:{development:{id:"a1c8672b-7b1c-476b-b3d0-41c27d575920",network:{nodeUrl:g["development"],chainId:31}},test:{id:"a1c8672b-7b1c-476b-b3d0-41c27d575920",network:{nodeUrl:g["test"],chainId:31}},production:{id:"a1c8672b-7b1c-476b-b3d0-41c27d575920",network:{nodeUrl:g["production"],chainId:30}}}},rskEscrowABI:n("17c5"),erc20ABI:n("a840"),contractAddresses:{development:"0xe2514B40ccf6De1Adc9FA25219bC4F17C5cac948",test:"0xe2514B40ccf6De1Adc9FA25219bC4F17C5cac948",production:"0x3465f85d57C4189D1e6f3580a078B9f8F7672aee"},tokens:{development:{RBTC:{id:"RBTC",symbol:"tRBTC",address:"0x0000000000000000000000000000000000000000",decimals:18},RIF:{id:"RIF",symbol:"tRIF",address:"0x19f64674d8a5b4e652319f5e239efd3bc969a1fe",decimals:18,image:"https://s2.coinmarketcap.com/static/img/coins/64x64/3701.png"},DOC:{id:"DOC",symbol:"DoC",address:"0xcb46c0ddc60d18efeb0e586c17af6ea36452dae0",decimals:18,image:"https://static.moneyonchain.com/moc-alphatestnet/public/moc/icon-stable.svg"}},test:{RBTC:{id:"RBTC",symbol:"tRBTC",address:"0x0000000000000000000000000000000000000000",decimals:18},RIF:{id:"RIF",symbol:"tRIF",address:"0x19f64674d8a5b4e652319f5e239efd3bc969a1fe",decimals:18,image:"https://s2.coinmarketcap.com/static/img/coins/64x64/3701.png"},DOC:{id:"DOC",symbol:"DoC",address:"0xcb46c0ddc60d18efeb0e586c17af6ea36452dae0",decimals:18,image:"https://static.moneyonchain.com/moc-alphatestnet/public/moc/icon-stable.svg"}}}};const A=w.wallets.rpcUrls["production"],k=Object.keys(A).map(Number),v=new c.a({cacheProvider:!1,providerOptions:{walletconnect:{package:u["a"],options:{rpc:A}},portis:{package:m.a,options:w.wallets.portisOptions["production"]},torus:{package:f["a"]},"custom-ledger":p["ledgerProviderOptions"],"custom-dcent":h["dcentProviderOptions"],"custom-trezor":{...y["trezorProviderOptions"],options:{manifestEmail:"info@iovlabs.org",manifestAppUrl:"https://basic-sample.rlogin.identity.rifos.org/"}}},rpcUrls:A,supportedChains:k}),x=w.contractAddresses["production"],T=w.networkNames["production"];let C=null,I=null;var S={setConnectionListener(e){I=e},async getInstance(){if(C)return C;let e=await v.connect(),t=new j.a(e.provider),n=(await t.eth.getAccounts())[0];return C={walletAddress:n,web3Instance:t,networkName:T,contract:new t.eth.Contract(w.rskEscrowABI,x),provider:e.provider},window.ethereum.on("networkChanged",(function(e){k.indexOf(Number(e))<0&&location.reload()})),I&&I({networkName:C.networkName,walletAddress:C.walletAddress}),window.ethereum.on("accountsChanged",(function(e){e&&0!==e.length?(C.walletAddress=e[0],I&&I({networkName:C.networkName,walletAddress:C.walletAddress})):location.reload()})),C}},B={name:"App",components:{},created(){let e=this;S.setConnectionListener((function(t){t&&e.$store.commit("setActiveConnection",t)}))},data(){return{}},computed:{activeConnection(){return this.$store.state.activeConnection}},methods:{}},q=n("6b0d"),E=n.n(q);const R=E()(B,[["render",l]]);var _=R;const $={loading:!1,activeSection:"",activeConnection:null},L={setLoading(e,t){e.loading=t},setActiveSection(e,t){e.activeSection=t},setActiveConnection(e,t){e.activeConnection=t}},P={},N={};var M={state:$,getters:P,mutations:L,actions:N};const F={key:0,class:"loading_container"},D=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),H=[D],U={key:1,class:"loading_container"},V={class:"text-danger"},K={key:2},Y={class:"p-5"},J=Object(s["f"])("h2",{class:"text-success text-center mb-4"},[Object(s["g"])("Your locked funds "),Object(s["f"])("i",{class:"text-secondary"},"(seller)")],-1),W={key:0,class:"text-center"},z=Object(s["f"])("i",{class:"text-primary"},"(You have no locked funds)",-1),G=[z],Q=Object(s["f"])("th",null,"Order ID",-1),X=Object(s["f"])("th",null,"Timestamp",-1),Z=Object(s["f"])("th",null,"Seller address",-1),ee=Object(s["f"])("th",null,"Buyer address",-1),te=Object(s["f"])("th",null,"Order Amount",-1),ne=Object(s["f"])("th",null,"Fee",-1),se=Object(s["f"])("th",null,"Total",-1),re={class:"mt-2"},ae=Object(s["f"])("h2",{class:"text-center text-success mt-5 mb-4"},[Object(s["g"])("Funds locked for you "),Object(s["f"])("i",{class:"text-secondary"},"(buyer)")],-1),oe={key:0,class:"text-center"},ie=Object(s["f"])("i",{class:"text-primary"},"(No locked funds for you)",-1),le=[ie],de=Object(s["f"])("th",null,"Order ID",-1),ce=Object(s["f"])("th",null,"Timestamp",-1),ue=Object(s["f"])("th",null,"Seller address",-1),be=Object(s["f"])("th",null,"Buyer address",-1),me=Object(s["f"])("th",null,"Order Amount",-1);function fe(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",F,H)):a.error?(Object(s["q"])(),Object(s["e"])("div",U,[Object(s["f"])("h2",V,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",K,[Object(s["f"])("div",Y,[J,0===a.sellerOrders.length?(Object(s["q"])(),Object(s["e"])("div",W,G)):Object(s["d"])("",!0),(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["u"])(a.sellerOrders,t=>(Object(s["q"])(),Object(s["e"])("table",{class:"text-left mt-4",style:{margin:"0 auto"},key:t.id},[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[Q,Object(s["f"])("td",null,Object(s["x"])(t.id),1)]),Object(s["f"])("tr",null,[X,Object(s["f"])("td",null,Object(s["x"])(e.formatTimestamp(t.timestamp)),1)]),Object(s["f"])("tr",null,[Z,Object(s["f"])("td",null,Object(s["x"])(t.sellerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[ee,Object(s["f"])("td",null,Object(s["x"])(t.buyerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[te,Object(s["f"])("td",null,Object(s["x"])(e.formatOrderAmount(t)),1)]),Object(s["f"])("tr",null,[ne,Object(s["f"])("td",null,Object(s["x"])(e.formatOrderFeeAmount(t)),1)]),Object(s["f"])("tr",null,[se,Object(s["f"])("td",null,Object(s["x"])(e.formatOrderTotalAmount(t)),1)])])]))),128))]),Object(s["f"])("div",re,[ae,0===a.buyerOrders.length?(Object(s["q"])(),Object(s["e"])("div",oe,le)):Object(s["d"])("",!0),(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["u"])(a.buyerOrders,t=>(Object(s["q"])(),Object(s["e"])("table",{class:"text-left mt-4",style:{margin:"0 auto"},key:t.id},[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[de,Object(s["f"])("td",null,Object(s["x"])(t.id),1)]),Object(s["f"])("tr",null,[ce,Object(s["f"])("td",null,Object(s["x"])(e.formatTimestamp(t.timestamp)),1)]),Object(s["f"])("tr",null,[ue,Object(s["f"])("td",null,Object(s["x"])(t.sellerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[be,Object(s["f"])("td",null,Object(s["x"])(t.buyerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[me,Object(s["f"])("td",null,Object(s["x"])(e.formatOrderAmount(t)),1)])])]))),128))])]))}var ye={components:{},created(){this.$store.commit("setActiveSection","HomePage"),this.loadOffers()},data(){return{sellerOrders:[],buyerOrders:[],error:null}},watch:{activeConnection(){this.loading||this.loadOffers()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadOffers(){this.$store.commit("setLoading",!0);try{let e=await S.getInstance(),t=await e.contract.methods.userOrders(e.walletAddress).call(),n=t.filter(e=>"1"===e.status);for(let s=0;s<n.length;s++)n[s]={...n[s]},n[s].token=this.getTokenByAddress(n[s].tokenContractAddress);this.sellerOrders=n.filter(t=>t.sellerAddress.toLowerCase()===e.walletAddress.toLowerCase()),this.buyerOrders=n.filter(t=>t.buyerAddress.toLowerCase()===e.walletAddress.toLowerCase()),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}}}};const pe=E()(ye,[["render",fe]]);var he=pe;const Oe={key:0,class:"loading_container"},je=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),ge=[je],we={key:1,class:"loading_container"},Ae={class:"text-danger"},ke={key:2,class:"loading_container"},ve=Object(s["f"])("h2",{class:"text-success mb-2"},"Escrow status",-1),xe={class:"text-left",style:{margin:"0 auto"}},Te={class:"text-left mt-4",style:{margin:"0 auto"}},Ce=Object(s["f"])("th",null,"Order ID",-1),Ie=Object(s["f"])("th",null,"Timestamp",-1),Se=Object(s["f"])("th",null,"Seller address",-1),Be=Object(s["f"])("th",null,"Buyer address",-1),qe=Object(s["f"])("th",null,"Order amount",-1),Ee={key:0},Re=Object(s["f"])("th",null,"Fee",-1),_e={key:1},$e=Object(s["f"])("th",null,"Total",-1),Le=Object(s["f"])("th",null,"Status",-1),Pe={key:0,class:"badge bg-warning"},Ne={key:1,class:"badge bg-success"},Me={key:2,class:"badge bg-danger"},Fe={key:0,class:"text-center mt-4"},De=Object(s["f"])("i",{class:"fa fa-plus"},null,-1);function He(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",Oe,ge)):a.error?(Object(s["q"])(),Object(s["e"])("div",we,[Object(s["f"])("h2",Ae,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",ke,[ve,Object(s["f"])("table",xe,[Object(s["f"])("table",Te,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[Ce,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[Ie,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[Se,Object(s["f"])("td",null,Object(s["x"])(a.sellerAddress),1)]),Object(s["f"])("tr",null,[Be,Object(s["f"])("td",null,Object(s["x"])(a.buyerAddress),1)]),Object(s["f"])("tr",null,[qe,Object(s["f"])("td",null,Object(s["x"])(a.orderAmount),1)]),a.refunded?(Object(s["q"])(),Object(s["e"])("tr",Ee,[Re,Object(s["f"])("td",null,Object(s["x"])(a.orderAmount),1)])):Object(s["d"])("",!0),a.refunded?(Object(s["q"])(),Object(s["e"])("tr",_e,[$e,Object(s["f"])("td",null,Object(s["x"])(a.totalAmount),1)])):Object(s["d"])("",!0),Object(s["f"])("tr",null,[Le,Object(s["f"])("td",null,[a.locked?(Object(s["q"])(),Object(s["e"])("span",Pe,"LOCKED")):a.released?(Object(s["q"])(),Object(s["e"])("span",Ne,Object(s["x"])(a.adminAction?"RELEASED TO BUYER BY ADMIN":"RELEASED TO BUYER"),1)):(Object(s["q"])(),Object(s["e"])("span",Me,Object(s["x"])(a.adminAction?"SELLER REFUNDED BY ADMIN":"SELLER REFUNDED"),1))])])])])]),"RBTC"!==a.token.id?(Object(s["q"])(),Object(s["e"])("div",Fe,[Object(s["f"])("button",{class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.addToken(a.token))},[De,Object(s["g"])(" Add "+Object(s["x"])(a.token.symbol)+" to your wallet",1)])])):Object(s["d"])("",!0)]))}const Ue=w.contractAddresses["production"],Ve=w.nodeURLs["production"];var Ke={components:{},created(){this.$store.commit("setActiveSection","RefundPage"),this.loadParams()},data(){return{orderId:null,token:null,timestamp:null,sellerAddress:null,buyerAddress:null,orderAmount:null,feeAmount:null,totalAmount:null,error:null,locked:!1,released:!1,refunded:!1,adminAction:!1}},computed:{loading(){return this.$store.state.loading}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";let e=new j.a(Ve),t=new e.eth.Contract(w.rskEscrowABI,Ue),n=await t.methods.orderById(this.orderId).call();if(this.token=this.getTokenByAddress(n.tokenContractAddress),!this.token)throw"There was an error fetching details: token not supported.";if("0"===n.status)throw"Order not found. Please, verify your link.";if("1"===n.status)this.locked=!0;else if("2"===n.status)this.released=!0;else{if("3"!==n.status)throw"There was an error fetching details: order status not supported.";this.refunded=!0}this.timestamp=this.formatTimestamp(n.timestamp),this.buyerAddress=n.buyerAddress.toLowerCase(),this.sellerAddress=n.sellerAddress.toLowerCase(),this.orderAmount=this.formatOrderAmount(n),this.feeAmount=this.formatOrderFeeAmount(n),this.totalAmount=this.formatOrderTotalAmount(n),this.adminAction=n.adminAction,this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async addToken(e){let t={type:"ERC20",options:{...e}};window.ethereum.request({method:"wallet_watchAsset",params:t})}}};const Ye=E()(Ke,[["render",He]]);var Je=Ye;const We={key:0,class:"loading_container"},ze=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),Ge=[ze],Qe={key:1,class:"loading_container"},Xe={class:"text-danger"},Ze={key:2,class:"loading_container"},et={class:"text-success mb-4"},tt=Object(s["g"])("Funds already locked for order "),nt={class:"text-secondary"},st={class:"text-dark fs-4"},rt=Object(s["g"])("Click "),at=Object(s["g"])("here"),ot=Object(s["g"])(" to check the updated status."),it={key:3,class:"loading_container"},lt={class:"text-success mb-4"},dt=Object(s["g"])("Funds successfully locked for order "),ct={class:"text-secondary"},ut=Object(s["f"])("p",{class:"text-primary"},"Your order will automatically updated shortly and you can close this window.",-1),bt={key:4,class:"loading_container"},mt={class:"text-success mb-4"},ft=Object(s["g"])("Lock funds for order "),yt={class:"text-secondary"},pt={class:"text-left",style:{margin:"0 auto"}},ht=Object(s["f"])("th",null,"Order ID",-1),Ot=Object(s["f"])("th",null,"Buyer Address",-1),jt=Object(s["f"])("th",null,"Seller Address",-1),gt=Object(s["f"])("th",null,"Amount",-1),wt=Object(s["f"])("th",null,"Fee",-1),At={class:"text-center mt-4"},kt={key:0,class:"btn btn-primary btn-block",disabled:""};function vt(e,t,n,r,a,o){const i=Object(s["v"])("router-link");return o.loading?(Object(s["q"])(),Object(s["e"])("div",We,Ge)):a.error?(Object(s["q"])(),Object(s["e"])("div",Qe,[Object(s["f"])("h2",Xe,Object(s["x"])(a.error),1)])):a.alreadyEscrowed?(Object(s["q"])(),Object(s["e"])("div",Ze,[Object(s["f"])("h2",et,[tt,Object(s["f"])("i",nt,Object(s["x"])(this.orderId),1)]),Object(s["f"])("p",st,[rt,Object(s["h"])(i,{to:"/rskp2pbot-dapp/status?orderId="+a.orderId},{default:Object(s["A"])(()=>[at]),_:1},8,["to"]),ot])])):a.locked?(Object(s["q"])(),Object(s["e"])("div",it,[Object(s["f"])("h2",lt,[dt,Object(s["f"])("i",ct,Object(s["x"])(this.orderId),1)]),ut])):(Object(s["q"])(),Object(s["e"])("div",bt,[Object(s["f"])("h2",mt,[ft,Object(s["f"])("i",yt,Object(s["x"])(this.orderId),1)]),Object(s["f"])("table",pt,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[ht,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[Ot,Object(s["f"])("td",null,Object(s["x"])(a.buyerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[jt,Object(s["f"])("td",null,Object(s["x"])(a.sellerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[gt,Object(s["f"])("td",null,Object(s["x"])(e.formatAmount(a.amount,a.token)),1)]),Object(s["f"])("tr",null,[wt,Object(s["f"])("td",null,Object(s["x"])(e.formatAmount(a.fee,a.token)),1)])])]),Object(s["f"])("div",At,[a.locking?(Object(s["q"])(),Object(s["e"])("button",kt,"Locking funds...")):(Object(s["q"])(),Object(s["e"])("button",{key:1,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.lockFunds())},"Lock "+Object(s["x"])(e.formatAmount(a.totalAmount,a.token)),1))])]))}var xt={components:{},created(){this.$store.commit("setActiveSection","LockPage"),this.loadParams()},data(){return{orderId:null,buyerAddress:null,buyerHash:null,sellerAddress:null,sellerHash:null,token:null,amount:null,fee:null,totalAmount:null,error:null,locking:!1,locked:!1,alreadyEscrowed:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.buyerAddress=this.$route.query.buyerAddress,this.buyerHash=this.$route.query.buyerHash,this.sellerHash=this.$route.query.sellerHash,this.token=this.getToken(this.$route.query.token),this.amount=this.$route.query.amount,this.fee=this.$route.query.fee,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";if(this.isStringEmpty(this.buyerAddress)||!this.isValidAddress(this.buyerAddress))throw"BuyerAddress not specified. Please, verify your link.";if(this.isStringEmpty(this.buyerHash))throw"BuyerHash not specified. Please, verify your link.";if(this.isStringEmpty(this.sellerHash))throw"SellerHash not specified. Please, verify your link.";if(!this.token)throw"Invalid token specified. Please, verify your link.";if(this.isStringEmpty(this.amount)||!this.isValidAmount(this.amount,this.token.decimals,"1"))throw"Invalid amount. Please, verify your link.";if(this.isStringEmpty(this.fee)||!this.isValidAmount(this.fee,this.token.decimals,"0"))throw"Invalid fee. Please, verify your link.";let e=await S.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();"0"!==t.status?this.alreadyEscrowed=!0:(this.buyerAddress=this.buyerAddress.toLowerCase(),this.sellerAddress=e.walletAddress.toLowerCase(),this.totalAmount=this.toBN(this.amount).add(this.toBN(this.fee))),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async lockFunds(){this.locking=!0;try{let e=await S.getInstance(),t="0x"+this.buyerHash.toLowerCase(),n="0x"+this.sellerHash.toLowerCase();if("RBTC"===this.token.id){let s=[this.orderId,this.buyerAddress,t,n,this.amount,this.fee];await e.contract.methods.escrowRBTC(...s).send({from:e.walletAddress,value:this.totalAmount})}else{if("RIF"!==this.token.id&&"DOC"!==this.token.id)throw"Unsupported token: "+this.token.id;{let s=new e.web3Instance.eth.Contract(w.erc20ABI,this.token.address),r=await s.methods.allowance(e.walletAddress,e.contract._address).call({from:e.walletAddress}),a=await s.methods.balanceOf(e.walletAddress).call({from:e.walletAddress});if(this.toBN(a.toString()).lt(this.totalAmount))throw"Not enough "+this.token.symbol;this.toBN(r.toString()).lt(this.totalAmount)&&await s.methods.approve(e.contract._address,this.toBN(2).pow(this.toBN(255)).toString()).send({from:e.walletAddress});let o=[this.orderId,this.token.address,this.buyerAddress,t,n,this.amount,this.fee];await e.contract.methods.escrowERC20(...o).send({from:e.walletAddress})}}this.locked=!0,this.locking=!1}catch(e){this.locking=!1,this.showError(e)}}}};const Tt=E()(xt,[["render",vt]]);var Ct=Tt;const It={key:0,class:"loading_container"},St=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),Bt=[St],qt={key:1,class:"loading_container"},Et={class:"text-danger"},Rt={key:2,class:"loading_container"},_t=Object(s["f"])("h2",{class:"text-success mb-4"},"Release funds to buyer",-1),$t={class:"text-left",style:{margin:"0 auto"}},Lt=Object(s["f"])("th",null,"Order ID",-1),Pt=Object(s["f"])("th",null,"Timestamp",-1),Nt=Object(s["f"])("th",null,"Buyer address",-1),Mt=Object(s["f"])("th",null,"Amount",-1),Ft={class:"text-center mt-4"},Dt={key:0,class:"btn btn-primary btn-block",disabled:""},Ht={key:1,class:"btn btn-success btn-block",disabled:""},Ut={key:2,class:"btn btn-warning btn-block",disabled:""};function Vt(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",It,Bt)):a.error?(Object(s["q"])(),Object(s["e"])("div",qt,[Object(s["f"])("h2",Et,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",Rt,[_t,Object(s["f"])("table",$t,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[Lt,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[Pt,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[Nt,Object(s["f"])("td",null,Object(s["x"])(a.buyerAddress),1)]),Object(s["f"])("tr",null,[Mt,Object(s["f"])("td",null,Object(s["x"])(a.amount),1)])])]),Object(s["f"])("div",Ft,[a.releasing?(Object(s["q"])(),Object(s["e"])("button",Dt,"Releasing funds...")):a.released?(Object(s["q"])(),Object(s["e"])("button",Ht,"Funds already released to buyer")):a.refunded?(Object(s["q"])(),Object(s["e"])("button",Ut,"Seller has been refunded")):(Object(s["q"])(),Object(s["e"])("button",{key:3,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.release())},"Release "+Object(s["x"])(a.amount),1))])]))}var Kt={name:"HomePage",components:{},created(){this.$store.commit("setActiveSection","ReleasePage"),this.loadParams()},data(){return{orderId:null,timestamp:null,buyerAddress:null,buyerCode:null,amount:null,error:null,releasing:!1,released:!1,refunded:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.buyerCode=this.$route.query.buyerCode,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";if(this.isStringEmpty(this.buyerCode))throw"BuyerCode not specified. Please, verify your link.";let e=await S.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();if("0"===t.status)throw"Order not found. Please, verify your link.";if("2"===t.status)this.released=!0;else if("3"===t.status)this.refunded=!0;else if("1"!==t.status)throw"There was an error fetching details: order status not supported.";this.buyerAddress=t.buyerAddress,this.amount=this.formatOrderAmount(t),this.timestamp=this.formatTimestamp(t.timestamp),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async release(){this.releasing=!0;try{let e=await S.getInstance(),t="0x"+this.buyerCode;await e.contract.methods.releaseToBuyer(this.orderId,t).send({from:e.walletAddress}),this.released=!0,this.releasing=!1,this.showSuccess("Funds released to buyer!")}catch(e){this.releasing=!1,this.showError(e)}}}};const Yt=E()(Kt,[["render",Vt]]);var Jt=Yt;const Wt={key:0,class:"loading_container"},zt=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),Gt=[zt],Qt={key:1,class:"loading_container"},Xt={class:"text-danger"},Zt={key:2,class:"loading_container"},en=Object(s["f"])("h2",{class:"text-success mb-4"},"Refund seller",-1),tn={class:"text-left",style:{margin:"0 auto"}},nn=Object(s["f"])("th",null,"Order ID",-1),sn=Object(s["f"])("th",null,"Timestamp",-1),rn=Object(s["f"])("th",null,"Seller address",-1),an=Object(s["f"])("th",null,"Order amount",-1),on=Object(s["f"])("th",null,"Fee",-1),ln=Object(s["f"])("th",null,"Total",-1),dn={class:"text-center mt-4"},cn={key:0,class:"btn btn-primary btn-block",disabled:""},un={key:1,class:"btn btn-warning btn-block",disabled:""},bn={key:2,class:"btn btn-success btn-block",disabled:""};function mn(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",Wt,Gt)):a.error?(Object(s["q"])(),Object(s["e"])("div",Qt,[Object(s["f"])("h2",Xt,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",Zt,[en,Object(s["f"])("table",tn,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[nn,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[sn,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[rn,Object(s["f"])("td",null,Object(s["x"])(a.sellerAddress),1)]),Object(s["f"])("tr",null,[an,Object(s["f"])("td",null,Object(s["x"])(a.orderAmount),1)]),Object(s["f"])("tr",null,[on,Object(s["f"])("td",null,Object(s["x"])(a.feeAmount),1)]),Object(s["f"])("tr",null,[ln,Object(s["f"])("td",null,Object(s["x"])(a.totalAmount),1)])])]),Object(s["f"])("div",dn,[a.refunding?(Object(s["q"])(),Object(s["e"])("button",cn,"Refunding seller...")):a.released?(Object(s["q"])(),Object(s["e"])("button",un,"Funds have been released to buyer")):a.refunded?(Object(s["q"])(),Object(s["e"])("button",bn,"Seller already refunded")):(Object(s["q"])(),Object(s["e"])("button",{key:3,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.refund())},"Refund "+Object(s["x"])(a.totalAmount),1))])]))}var fn={name:"HomePage",components:{},created(){this.$store.commit("setActiveSection","RefundPage"),this.loadParams()},data(){return{orderId:null,timestamp:null,sellerAddress:null,sellerCode:null,orderAmount:null,feeAmount:null,totalAmount:null,error:null,refunding:!1,released:!1,refunded:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.sellerCode=this.$route.query.sellerCode,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";if(this.isStringEmpty(this.sellerCode))throw"SellerCode not specified. Please, verify your link.";let e=await S.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();if("0"===t.status)throw"Order not found. Please, verify your link.";if("2"===t.status)this.released=!0;else if("3"===t.status)this.refunded=!0;else if("1"!==t.status)throw"There was an error fetching details: order status not supported.";this.timestamp=this.formatTimestamp(t.timestamp),this.sellerAddress=t.sellerAddress.toLowerCase(),this.orderAmount=this.formatOrderAmount(t),this.feeAmount=this.formatOrderFeeAmount(t),this.totalAmount=this.formatOrderTotalAmount(t),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async refund(){this.refunding=!0;try{let e=await S.getInstance(),t="0x"+this.sellerCode;await e.contract.methods.refundSeller(this.orderId,t).send({from:e.walletAddress}),this.refunded=!0,this.refunding=!1,this.showSuccess("Seller refunded!")}catch(e){this.refunding=!1,this.showError(e)}}}};const yn=E()(fn,[["render",mn]]);var pn=yn;const hn={key:0,class:"loading_container"},On=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),jn=[On],gn={key:1,class:"loading_container"},wn={class:"text-danger"},An={key:2,class:"loading_container"},kn=Object(s["f"])("h2",{class:"text-success mb-4"},"Release funds to buyer",-1),vn={class:"text-left",style:{margin:"0 auto"}},xn=Object(s["f"])("th",null,"Order ID",-1),Tn=Object(s["f"])("th",null,"Timestamp",-1),Cn=Object(s["f"])("th",null,"Buyer address",-1),In=Object(s["f"])("th",null,"Amount",-1),Sn={class:"text-center mt-4"},Bn={key:0,class:"btn btn-primary btn-block",disabled:""},qn={key:1,class:"btn btn-success btn-block",disabled:""},En={key:2,class:"btn btn-warning btn-block",disabled:""};function Rn(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",hn,jn)):a.error?(Object(s["q"])(),Object(s["e"])("div",gn,[Object(s["f"])("h2",wn,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",An,[kn,Object(s["f"])("table",vn,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[xn,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[Tn,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[Cn,Object(s["f"])("td",null,Object(s["x"])(a.buyerAddress),1)]),Object(s["f"])("tr",null,[In,Object(s["f"])("td",null,Object(s["x"])(a.amount),1)])])]),Object(s["f"])("div",Sn,[a.releasing?(Object(s["q"])(),Object(s["e"])("button",Bn,"Releasing funds...")):a.released?(Object(s["q"])(),Object(s["e"])("button",qn,"Funds already released to buyer")):a.refunded?(Object(s["q"])(),Object(s["e"])("button",En,"Seller has been refunded")):(Object(s["q"])(),Object(s["e"])("button",{key:3,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.release())},"Release "+Object(s["x"])(a.amount),1))])]))}var _n={components:{},created(){this.$store.commit("setActiveSection","AdminReleasePage"),this.loadParams()},data(){return{orderId:null,timestamp:null,buyerAddress:null,amount:null,error:null,releasing:!1,released:!1,refunded:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.buyerCode=this.$route.query.buyerCode,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";let e=await S.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();if("0"===t.status)throw"Order not found. Please, verify your link.";if("2"===t.status)this.released=!0;else if("3"===t.status)this.refunded=!0;else if("1"!==t.status)throw"There was an error fetching details: order status not supported.";this.buyerAddress=t.buyerAddress.toLowerCase(),this.amount=this.formatOrderAmount(t),this.timestamp=this.formatTimestamp(t.timestamp),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async release(){this.releasing=!0;try{let e=await S.getInstance();await e.contract.methods.adminReleaseToBuyer(this.orderId).send({from:e.walletAddress}),this.released=!0,this.releasing=!1,this.showSuccess("Funds released to buyer!")}catch(e){this.releasing=!1,this.showError(e)}}}};const $n=E()(_n,[["render",Rn]]);var Ln=$n;const Pn={key:0,class:"loading_container"},Nn=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),Mn=[Nn],Fn={key:1,class:"loading_container"},Dn={class:"text-danger"},Hn={key:2,class:"loading_container"},Un=Object(s["f"])("h2",{class:"text-success mb-4"},"Refund seller",-1),Vn={class:"text-left",style:{margin:"0 auto"}},Kn=Object(s["f"])("th",null,"Order ID",-1),Yn=Object(s["f"])("th",null,"Timestamp",-1),Jn=Object(s["f"])("th",null,"Seller address",-1),Wn=Object(s["f"])("th",null,"Order amount",-1),zn=Object(s["f"])("th",null,"Fee",-1),Gn=Object(s["f"])("th",null,"Total",-1),Qn={class:"text-center mt-4"},Xn={key:0,class:"btn btn-primary btn-block",disabled:""},Zn={key:1,class:"btn btn-warning btn-block",disabled:""},es={key:2,class:"btn btn-success btn-block",disabled:""};function ts(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",Pn,Mn)):a.error?(Object(s["q"])(),Object(s["e"])("div",Fn,[Object(s["f"])("h2",Dn,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",Hn,[Un,Object(s["f"])("table",Vn,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[Kn,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[Yn,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[Jn,Object(s["f"])("td",null,Object(s["x"])(a.sellerAddress),1)]),Object(s["f"])("tr",null,[Wn,Object(s["f"])("td",null,Object(s["x"])(a.orderAmount),1)]),Object(s["f"])("tr",null,[zn,Object(s["f"])("td",null,Object(s["x"])(a.feeAmount),1)]),Object(s["f"])("tr",null,[Gn,Object(s["f"])("td",null,Object(s["x"])(a.totalAmount),1)])])]),Object(s["f"])("div",Qn,[a.refunding?(Object(s["q"])(),Object(s["e"])("button",Xn,"Refunding seller...")):a.released?(Object(s["q"])(),Object(s["e"])("button",Zn,"Funds have been released to buyer")):a.refunded?(Object(s["q"])(),Object(s["e"])("button",es,"Seller already refunded")):(Object(s["q"])(),Object(s["e"])("button",{key:3,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.refund())},"Refund "+Object(s["x"])(a.totalAmount),1))])]))}var ns={components:{},created(){this.$store.commit("setActiveSection","AdminRefundPage"),this.loadParams()},data(){return{orderId:null,timestamp:null,sellerAddress:null,orderAmount:null,feeAmount:null,totalAmount:null,error:null,refunding:!1,released:!1,refunded:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";let e=await S.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();if("0"===t.status)throw"Order not found. Please, verify your link.";if("2"===t.status)this.released=!0;else if("3"===t.status)this.refunded=!0;else if("1"!==t.status)throw"There was an error fetching details: order status not supported.";this.timestamp=this.formatTimestamp(t.timestamp),this.sellerAddress=t.sellerAddress.toLowerCase(),this.orderAmount=this.formatOrderAmount(t),this.feeAmount=this.formatOrderFeeAmount(t),this.totalAmount=this.formatOrderTotalAmount(t),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async refund(){this.refunding=!0;try{let e=await S.getInstance();await e.contract.methods.adminRefundSeller(this.orderId).send({from:e.walletAddress}),this.refunded=!0,this.refunding=!1,this.showSuccess("Seller refunded!")}catch(e){this.refunding=!1,this.showError(e)}}}};const ss=E()(ns,[["render",ts]]);var rs=ss;const as={class:"loading_container"},os=Object(s["f"])("h2",{class:"text-danger"},"Page not found",-1),is=[os];function ls(e,t,n,r,a,o){return Object(s["q"])(),Object(s["e"])("div",as,is)}var ds={created(){this.$store.commit("setActiveSection",""),this.$store.commit("setLoading",!1)},components:{},data(){return{}},methods:{}};const cs=E()(ds,[["render",ls]]);var us=cs;const bs=[{path:"",component:he},{path:"/status",component:Je},{path:"/lock",component:Ct},{path:"/release",component:Jt},{path:"/refund",component:pn},{path:"/adminRelease",component:Ln},{path:"/adminRefund",component:rs},{path:"/rsk",component:he},{path:"/rsk/status",component:Je},{path:"/rsk/lock",component:Ct},{path:"/rsk/release",component:Jt},{path:"/rsk/refund",component:pn},{path:"/rsk/adminRelease",component:Ln},{path:"/rsk/adminRefund",component:rs},{path:"/:catchAll(.*)",component:us}];var ms=bs,fs={isString(e){return"string"===typeof e||e instanceof String},isEmpty(e){return void 0===e||null===e||!this.isString(e)||0===e.trim().length},removeHexPrefix(e){return e.replace(/^0x/,"")},addHexPrefix(e){return"0x"+this.removeHexPrefix(e)}},ys=(n("d9e2"),n("5ba3")),ps=n.n(ys),hs={isValidAmount(e,t,n,s){if(!fs.isString(e)||fs.isEmpty(e))return!1;const r="^(0|[1-9]\\d*)(\\.\\d{0,"+t+"})?$";if(!1===new RegExp(r).test(e))return!1;if(!fs.isEmpty(n))try{n=this.toBN(n)}catch(a){n=null}if(!fs.isEmpty(s))try{s=this.toBN(s)}catch(a){s=null}try{let t=this.toBN(e);if(n&&t.lt(n))throw"Value should be >= "+n.toString();if(s&&t.le(s))throw"Value should be <= "+s.toString()}catch(a){return!1}return!0},toBaseUnit(e,t){if(!fs.isString(e))throw new Error("Pass strings to prevent floating point precision issues.");const n="^(0|[1-9]\\d*)(\\.\\d{0,"+t+"})?$";if(!1===new RegExp(n).test(e))throw new Error("INVALID_NUMBER");const s=ps.a.BN,r=new s(10),a=r.pow(new s(t));let o="-"===e.substring(0,1);if(o&&(e=e.substring(1)),"."===e)throw new Error(`Invalid value ${e} cannot be converted to base unit with ${t} decimals.`);let i=e.split(".");if(i.length>2)throw new Error("Too many decimal points");let l=i[0],d=i[1];if(l||(l="0"),d||(d="0"),d.length>t)throw new Error("Too many decimal places");while(d.length<t)d+="0";l=new s(l),d=new s(d);let c=l.mul(a).add(d);return o&&(c=c.neg()),new s(c.toString(10),10)},toBN(e){return new ps.a.BN(e)},exp(e,t){return this.toBN(e).pow(this.toBN(t))},formatUnit(e,t){e=this.toBN(e);let n=new ps.a.BN(10).pow(new ps.a.BN(t)),s=e.mod(n).toString(10);while(s.length<t)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];let r=e.div(n).toString(10);e=`${r}.${s}`;let a=t-s.length;while(a>0)a--,e+="0";return e},toBigInt(e){return BigInt(e)}},Os={isValidAddress(e){return ps.a.isAddress(e)}},js={formatDuration(e){if(!e)return"-";let t=Number(e),n=Math.floor(t/86400),s=Math.floor(t%86400/3600),r=Math.floor(t%3600/60),a=Math.floor(t%60),o=n>0?n+(1==n?" day, ":" days, "):"",i=s>0?s+(1==s?" hour, ":" hours, "):"",l=r>0?r+(1==r?" minute, ":" minutes, "):"",d=a>0?a+(1==a?" second":" seconds"):"",c=o+i+l+d;return c.endsWith(", ")&&(c=c.substring(0,c.length-2)),c},formatTimestamp(e){return e?new Date(1e3*Number(e)).toLocaleString():"-"}};const gs=window["$"];function ws(e){let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n].address]=e[n]);return t}let As=ws(w.tokens["production"]);var ks={methods:{isStringEmpty(e){return fs.isEmpty(e)},isValidAddress(e){return Os.isValidAddress(e)},isValidAmount(e,t,n){return hs.isValidAmount(e,t,n)},toBN(e){return new ps.a.BN(e)},toBytes32(e){return ps.a.fromAscii(e)},getToken(e){return e&&(e=String(e).toUpperCase()),w.tokens["production"][e]},getTokenByAddress(e){return As[e.toLowerCase()]},formatAddress(e){return(e.substring(0,7)+"..."+e.substring(e.length-5)).toLowerCase()},formatTimestamp(e){return js.formatTimestamp(e)},formatAmount(e,t){if(!e)return null;if(!t)return null;let n=hs.formatUnit(e.toString(),t.decimals)+" "+t.symbol;return n},formatOrderAmount(e){let t=this.formatAmount(this.toBN(e.amount),this.getTokenByAddress(e.tokenContractAddress));return t||null},formatOrderFeeAmount(e){let t=this.formatAmount(this.toBN(e.fee),this.getTokenByAddress(e.tokenContractAddress));return t||null},formatOrderTotalAmount(e){let t=this.toBN(e.fee).add(this.toBN(e.amount)),n=this.formatAmount(t,this.getTokenByAddress(e.tokenContractAddress));return n||null},showError(e){let t;console.log(e),t=e.data&&e.data.data&&e.data.data.message?e.data.data.message:e.message?e.message:e,this.$store.commit("setLoading",!1),gs("#errorMsg").text(t),gs("#errorModal").modal("show")},showSuccess(e){gs("#successMsg").text(e),gs("#successModal").modal("show")}}};const vs=Object(a["a"])(M),xs=Object(r["a"])({history:Object(r["b"])(),routes:ms}),Ts=Object(s["c"])(_);Ts.use(xs),Ts.use(vs),Ts.mixin(ks),Ts.mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},a840:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')}});
//# sourceMappingURL=app.34c705bc.js.map