(function(e){function t(t){for(var s,o,i=t[0],l=t[1],d=t[2],u=0,b=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(b.length)b.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},r={app:0},a=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var c=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},"17c5":function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"orderId","type":"string"},{"indexed":false,"internalType":"address","name":"tokenContractAddress","type":"address"},{"indexed":false,"internalType":"address","name":"buyerAddress","type":"address"},{"indexed":false,"internalType":"bytes32","name":"buyerHash","type":"bytes32"},{"indexed":false,"internalType":"address","name":"sellerAddress","type":"address"},{"indexed":false,"internalType":"bytes32","name":"sellerHash","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"}],"name":"OrderLocked","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"orderId","type":"string"},{"indexed":false,"internalType":"address","name":"tokenContractAddress","type":"address"},{"indexed":false,"internalType":"address","name":"sellerAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"},{"indexed":false,"internalType":"bool","name":"adminAction","type":"bool"}],"name":"OrderRefunded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"orderId","type":"string"},{"indexed":false,"internalType":"address","name":"tokenContractAddress","type":"address"},{"indexed":false,"internalType":"address","name":"buyerAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"bool","name":"adminAction","type":"bool"}],"name":"OrderReleased","type":"event"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"}],"name":"adminRefundSeller","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"}],"name":"adminReleaseToBuyer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"},{"internalType":"address","name":"_tokenContractAddress","type":"address"},{"internalType":"address","name":"_buyerAddress","type":"address"},{"internalType":"bytes32","name":"_buyerHash","type":"bytes32"},{"internalType":"bytes32","name":"_sellerHash","type":"bytes32"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_fee","type":"uint256"}],"name":"escrowERC20","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"},{"internalType":"address","name":"_buyerAddress","type":"address"},{"internalType":"bytes32","name":"_buyerHash","type":"bytes32"},{"internalType":"bytes32","name":"_sellerHash","type":"bytes32"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_fee","type":"uint256"}],"name":"escrowRBTC","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenContractAddress","type":"address"}],"name":"fees","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenContractAddress","type":"address"}],"name":"isERC20Whitelisted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"}],"name":"orderById","outputs":[{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"address","name":"tokenContractAddress","type":"address"},{"internalType":"address","name":"buyerAddress","type":"address"},{"internalType":"bytes32","name":"buyerHash","type":"bytes32"},{"internalType":"address","name":"sellerAddress","type":"address"},{"internalType":"bytes32","name":"sellerHash","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"fee","type":"uint256"},{"internalType":"enum RSKEscrow.EscrowStatus","name":"status","type":"uint8"},{"internalType":"bool","name":"adminAction","type":"bool"}],"internalType":"struct RSKEscrow.EscrowOrder","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"},{"internalType":"bytes32","name":"_sellerCode","type":"bytes32"}],"name":"refundSeller","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_orderId","type":"string"},{"internalType":"bytes32","name":"_buyerCode","type":"bytes32"}],"name":"releaseToBuyer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenContractAddress","type":"address"},{"internalType":"bool","name":"flag","type":"bool"}],"name":"setWhitelistedERC20Token","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_userAddress","type":"address"}],"name":"userOrders","outputs":[{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"address","name":"tokenContractAddress","type":"address"},{"internalType":"address","name":"buyerAddress","type":"address"},{"internalType":"bytes32","name":"buyerHash","type":"bytes32"},{"internalType":"address","name":"sellerAddress","type":"address"},{"internalType":"bytes32","name":"sellerHash","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"fee","type":"uint256"},{"internalType":"enum RSKEscrow.EscrowStatus","name":"status","type":"uint8"},{"internalType":"bool","name":"adminAction","type":"bool"}],"internalType":"struct RSKEscrow.EscrowOrder[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenContractAddress","type":"address"}],"name":"withdrawFees","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t){},24:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);var s=n("7a23"),r=n("6605"),a=n("5502");const o={key:0,style:{"text-align":"right"}},i={class:"badge bg-dark m-3 fs-5"};function l(e,t,n,r,a,l){const d=Object(s["v"])("router-view");return Object(s["q"])(),Object(s["e"])("div",null,[this.activeConnection?(Object(s["q"])(),Object(s["e"])("div",o,[Object(s["f"])("h2",i,Object(s["x"])(l.activeConnection.networkName)+" - "+Object(s["x"])(e.formatAddress(l.activeConnection.walletAddress)),1)])):Object(s["d"])("",!0),Object(s["h"])(d)])}var d=n("100f"),c=n.n(d),u=n("2eaf"),b=n("31af"),m=n.n(b),f=n("9721"),y=n("8f0a"),p=n("07b1"),h=n("eb2c"),O=n("99e5"),j=n.n(O);const g={development:"https://public-node.testnet.rsk.co",test:"https://public-node.testnet.rsk.co",production:"https://public-node.rsk.co"};var w={nodeURLs:g,networkNames:{development:"RSK Testnet",test:"RSK Testnet",production:"RSK Mainnet"},wallets:{rpcUrls:{development:{31:g["development"]},test:{31:g["test"]},production:{30:g["production"]}},portisOptions:{development:{id:"a1c8672b-7b1c-476b-b3d0-41c27d575920",network:{nodeUrl:g["development"],chainId:31}},test:{id:"a1c8672b-7b1c-476b-b3d0-41c27d575920",network:{nodeUrl:g["test"],chainId:31}},production:{id:"a1c8672b-7b1c-476b-b3d0-41c27d575920",network:{nodeUrl:g["production"],chainId:30}}}},rskEscrowABI:n("17c5"),erc20ABI:n("a840"),contractAddresses:{development:"0xe2514B40ccf6De1Adc9FA25219bC4F17C5cac948",test:"0xe2514B40ccf6De1Adc9FA25219bC4F17C5cac948",production:"0x3465f85d57C4189D1e6f3580a078B9f8F7672aee"},tokens:{development:{RBTC:{id:"RBTC",symbol:"tRBTC",address:"0x0000000000000000000000000000000000000000",decimals:18},RIF:{id:"RIF",symbol:"tRIF",address:"0x19f64674d8a5b4e652319f5e239efd3bc969a1fe",decimals:18,image:"https://s2.coinmarketcap.com/static/img/coins/64x64/3701.png"},DOC:{id:"DOC",symbol:"DoC",address:"0xcb46c0ddc60d18efeb0e586c17af6ea36452dae0",decimals:18,image:"https://static.moneyonchain.com/moc-alphatestnet/public/moc/icon-stable.svg"}},test:{RBTC:{id:"RBTC",symbol:"tRBTC",address:"0x0000000000000000000000000000000000000000",decimals:18},RIF:{id:"RIF",symbol:"tRIF",address:"0x19f64674d8a5b4e652319f5e239efd3bc969a1fe",decimals:18,image:"https://s2.coinmarketcap.com/static/img/coins/64x64/3701.png"},DOC:{id:"DOC",symbol:"DoC",address:"0xcb46c0ddc60d18efeb0e586c17af6ea36452dae0",decimals:18,image:"https://static.moneyonchain.com/moc-alphatestnet/public/moc/icon-stable.svg"}},production:{RBTC:{id:"RBTC",symbol:"RBTC",address:"0x0000000000000000000000000000000000000000",decimals:18},RIF:{id:"RIF",symbol:"RIF",address:"0x2acc95758f8b5f583470ba265eb685a8f45fc9d5",decimals:18,image:"https://s2.coinmarketcap.com/static/img/coins/64x64/3701.png"},DOC:{id:"DOC",symbol:"DoC",address:"0xe700691da7b9851f2f35f8b8182c69c53ccad9db",decimals:18,image:"https://static.moneyonchain.com/moc-alphatestnet/public/moc/icon-stable.svg"}}}};const A="production",k=w.wallets.rpcUrls[A],v=Object.keys(k).map(Number),x=new c.a({cacheProvider:!1,providerOptions:{walletconnect:{package:u["a"],options:{bridge:"https://walletconnect-bridge.rifos.org/",rpc:k}},portis:{package:m.a,options:w.wallets.portisOptions[A]},torus:{package:f["a"]},"custom-ledger":p["ledgerProviderOptions"],"custom-dcent":h["dcentProviderOptions"],"custom-trezor":{...y["trezorProviderOptions"],options:{manifestEmail:"info@iovlabs.org",manifestAppUrl:"https://basic-sample.rlogin.identity.rifos.org/"}}},rpcUrls:k,supportedChains:v}),T=w.contractAddresses[A],C=w.networkNames[A];let I=null,S=null;var B={setConnectionListener(e){S=e},async getInstance(){if(I)return I;let e=await x.connect(),t=e.provider,n=new j.a(t),s=(await n.eth.getAccounts())[0];return I={walletAddress:s,web3Instance:n,networkName:C,contract:new n.eth.Contract(w.rskEscrowABI,T),provider:t},t.on("chainChanged",(function(e){location.reload()})),t.on("disconnect",(function(){location.reload()})),S&&S({networkName:I.networkName,walletAddress:I.walletAddress}),t.on("accountsChanged",(function(e){location.reload()})),I}},R={name:"App",components:{},created(){let e=this;B.setConnectionListener((function(t){t&&e.$store.commit("setActiveConnection",t)}))},data(){return{}},computed:{activeConnection(){return this.$store.state.activeConnection}},methods:{}},q=n("6b0d"),E=n.n(q);const _=E()(R,[["render",l]]);var $=_;const L={loading:!1,activeSection:"",activeConnection:null},P={setLoading(e,t){e.loading=t},setActiveSection(e,t){e.activeSection=t},setActiveConnection(e,t){e.activeConnection=t}},N={},F={};var D={state:L,getters:N,mutations:P,actions:F};const M={key:0,class:"loading_container"},H=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),U=[H],V={key:1,class:"loading_container"},K={class:"text-danger"},Y={key:2},J={class:"p-5"},W=Object(s["f"])("h2",{class:"text-success text-center mb-4"},[Object(s["g"])("Your locked funds "),Object(s["f"])("i",{class:"text-secondary"},"(seller)")],-1),z={key:0,class:"text-center"},G=Object(s["f"])("i",{class:"text-primary"},"(You have no locked funds)",-1),Q=[G],X=Object(s["f"])("th",null,"Order ID",-1),Z=Object(s["f"])("th",null,"Timestamp",-1),ee=Object(s["f"])("th",null,"Seller address",-1),te=Object(s["f"])("th",null,"Buyer address",-1),ne=Object(s["f"])("th",null,"Order Amount",-1),se=Object(s["f"])("th",null,"Fee",-1),re=Object(s["f"])("th",null,"Total",-1),ae={class:"mt-2"},oe=Object(s["f"])("h2",{class:"text-center text-success mt-5 mb-4"},[Object(s["g"])("Funds locked for you "),Object(s["f"])("i",{class:"text-secondary"},"(buyer)")],-1),ie={key:0,class:"text-center"},le=Object(s["f"])("i",{class:"text-primary"},"(No locked funds for you)",-1),de=[le],ce=Object(s["f"])("th",null,"Order ID",-1),ue=Object(s["f"])("th",null,"Timestamp",-1),be=Object(s["f"])("th",null,"Seller address",-1),me=Object(s["f"])("th",null,"Buyer address",-1),fe=Object(s["f"])("th",null,"Order Amount",-1);function ye(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",M,U)):a.error?(Object(s["q"])(),Object(s["e"])("div",V,[Object(s["f"])("h2",K,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",Y,[Object(s["f"])("div",J,[W,0===a.sellerOrders.length?(Object(s["q"])(),Object(s["e"])("div",z,Q)):Object(s["d"])("",!0),(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["u"])(a.sellerOrders,t=>(Object(s["q"])(),Object(s["e"])("table",{class:"text-left mt-4",style:{margin:"0 auto"},key:t.id},[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[X,Object(s["f"])("td",null,Object(s["x"])(t.id),1)]),Object(s["f"])("tr",null,[Z,Object(s["f"])("td",null,Object(s["x"])(e.formatTimestamp(t.timestamp)),1)]),Object(s["f"])("tr",null,[ee,Object(s["f"])("td",null,Object(s["x"])(t.sellerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[te,Object(s["f"])("td",null,Object(s["x"])(t.buyerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[ne,Object(s["f"])("td",null,Object(s["x"])(e.formatOrderAmount(t)),1)]),Object(s["f"])("tr",null,[se,Object(s["f"])("td",null,Object(s["x"])(e.formatOrderFeeAmount(t)),1)]),Object(s["f"])("tr",null,[re,Object(s["f"])("td",null,Object(s["x"])(e.formatOrderTotalAmount(t)),1)])])]))),128))]),Object(s["f"])("div",ae,[oe,0===a.buyerOrders.length?(Object(s["q"])(),Object(s["e"])("div",ie,de)):Object(s["d"])("",!0),(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["u"])(a.buyerOrders,t=>(Object(s["q"])(),Object(s["e"])("table",{class:"text-left mt-4",style:{margin:"0 auto"},key:t.id},[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[ce,Object(s["f"])("td",null,Object(s["x"])(t.id),1)]),Object(s["f"])("tr",null,[ue,Object(s["f"])("td",null,Object(s["x"])(e.formatTimestamp(t.timestamp)),1)]),Object(s["f"])("tr",null,[be,Object(s["f"])("td",null,Object(s["x"])(t.sellerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[me,Object(s["f"])("td",null,Object(s["x"])(t.buyerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[fe,Object(s["f"])("td",null,Object(s["x"])(e.formatOrderAmount(t)),1)])])]))),128))])]))}var pe={components:{},created(){this.$store.commit("setActiveSection","HomePage"),this.loadOffers()},data(){return{sellerOrders:[],buyerOrders:[],error:null}},watch:{activeConnection(){this.loading||this.loadOffers()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadOffers(){this.$store.commit("setLoading",!0);try{let e=await B.getInstance(),t=await e.contract.methods.userOrders(e.walletAddress).call(),n=t.filter(e=>"1"===e.status);for(let s=0;s<n.length;s++)n[s]={...n[s]},n[s].token=this.getTokenByAddress(n[s].tokenContractAddress);this.sellerOrders=n.filter(t=>t.sellerAddress.toLowerCase()===e.walletAddress.toLowerCase()),this.buyerOrders=n.filter(t=>t.buyerAddress.toLowerCase()===e.walletAddress.toLowerCase()),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}}}};const he=E()(pe,[["render",ye]]);var Oe=he;const je={key:0,class:"loading_container"},ge=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),we=[ge],Ae={key:1,class:"loading_container"},ke={class:"text-danger"},ve={key:2,class:"loading_container"},xe=Object(s["f"])("h2",{class:"text-success mb-2"},"Escrow status",-1),Te={class:"text-left",style:{margin:"0 auto"}},Ce={class:"text-left mt-4",style:{margin:"0 auto"}},Ie=Object(s["f"])("th",null,"Order ID",-1),Se=Object(s["f"])("th",null,"Timestamp",-1),Be=Object(s["f"])("th",null,"Seller address",-1),Re=Object(s["f"])("th",null,"Buyer address",-1),qe=Object(s["f"])("th",null,"Order amount",-1),Ee={key:0},_e=Object(s["f"])("th",null,"Fee",-1),$e={key:1},Le=Object(s["f"])("th",null,"Total",-1),Pe=Object(s["f"])("th",null,"Status",-1),Ne={key:0,class:"badge bg-warning"},Fe={key:1,class:"badge bg-success"},De={key:2,class:"badge bg-danger"},Me={key:0,class:"text-center mt-4"},He=Object(s["f"])("i",{class:"fa fa-plus"},null,-1);function Ue(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",je,we)):a.error?(Object(s["q"])(),Object(s["e"])("div",Ae,[Object(s["f"])("h2",ke,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",ve,[xe,Object(s["f"])("table",Te,[Object(s["f"])("table",Ce,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[Ie,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[Se,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[Be,Object(s["f"])("td",null,Object(s["x"])(a.sellerAddress),1)]),Object(s["f"])("tr",null,[Re,Object(s["f"])("td",null,Object(s["x"])(a.buyerAddress),1)]),Object(s["f"])("tr",null,[qe,Object(s["f"])("td",null,Object(s["x"])(a.orderAmount),1)]),a.refunded?(Object(s["q"])(),Object(s["e"])("tr",Ee,[_e,Object(s["f"])("td",null,Object(s["x"])(a.orderAmount),1)])):Object(s["d"])("",!0),a.refunded?(Object(s["q"])(),Object(s["e"])("tr",$e,[Le,Object(s["f"])("td",null,Object(s["x"])(a.totalAmount),1)])):Object(s["d"])("",!0),Object(s["f"])("tr",null,[Pe,Object(s["f"])("td",null,[a.locked?(Object(s["q"])(),Object(s["e"])("span",Ne,"LOCKED")):a.released?(Object(s["q"])(),Object(s["e"])("span",Fe,Object(s["x"])(a.adminAction?"RELEASED TO BUYER BY ADMIN":"RELEASED TO BUYER"),1)):(Object(s["q"])(),Object(s["e"])("span",De,Object(s["x"])(a.adminAction?"SELLER REFUNDED BY ADMIN":"SELLER REFUNDED"),1))])])])])]),"RBTC"!==a.token.id?(Object(s["q"])(),Object(s["e"])("div",Me,[Object(s["f"])("button",{class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.addToken(a.token))},[He,Object(s["g"])(" Add "+Object(s["x"])(a.token.symbol)+" to your wallet",1)])])):Object(s["d"])("",!0)]))}const Ve=w.contractAddresses["production"],Ke=w.nodeURLs["production"];var Ye={components:{},created(){this.$store.commit("setActiveSection","RefundPage"),this.loadParams()},data(){return{orderId:null,token:null,timestamp:null,sellerAddress:null,buyerAddress:null,orderAmount:null,feeAmount:null,totalAmount:null,error:null,locked:!1,released:!1,refunded:!1,adminAction:!1}},computed:{loading(){return this.$store.state.loading}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";let e=new j.a(Ke),t=new e.eth.Contract(w.rskEscrowABI,Ve),n=await t.methods.orderById(this.orderId).call();if(this.token=this.getTokenByAddress(n.tokenContractAddress),!this.token)throw"There was an error fetching details: token not supported.";if("0"===n.status)throw"Order not found. Please, verify your link.";if("1"===n.status)this.locked=!0;else if("2"===n.status)this.released=!0;else{if("3"!==n.status)throw"There was an error fetching details: order status not supported.";this.refunded=!0}this.timestamp=this.formatTimestamp(n.timestamp),this.buyerAddress=n.buyerAddress.toLowerCase(),this.sellerAddress=n.sellerAddress.toLowerCase(),this.orderAmount=this.formatOrderAmount(n),this.feeAmount=this.formatOrderFeeAmount(n),this.totalAmount=this.formatOrderTotalAmount(n),this.adminAction=n.adminAction,this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async addToken(e){let t={type:"ERC20",options:{...e}};window.ethereum.request({method:"wallet_watchAsset",params:t})}}};const Je=E()(Ye,[["render",Ue]]);var We=Je;const ze={key:0,class:"loading_container"},Ge=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),Qe=[Ge],Xe={key:1,class:"loading_container"},Ze={class:"text-danger"},et={key:2,class:"loading_container"},tt={class:"text-success mb-4"},nt=Object(s["g"])("Funds already locked for order "),st={class:"text-secondary"},rt={class:"text-dark fs-4"},at=Object(s["g"])("Click "),ot=Object(s["g"])("here"),it=Object(s["g"])(" to check the updated status."),lt={key:3,class:"loading_container"},dt={class:"text-success mb-4"},ct=Object(s["g"])("Funds successfully locked for order "),ut={class:"text-secondary"},bt=Object(s["f"])("p",{class:"text-primary"},"Your order will be automatically updated shortly. You can close this window.",-1),mt={key:4,class:"loading_container"},ft={class:"text-success mb-4"},yt=Object(s["g"])("Lock funds for order "),pt={class:"text-secondary"},ht={class:"text-left",style:{margin:"0 auto"}},Ot=Object(s["f"])("th",null,"Order ID",-1),jt=Object(s["f"])("th",null,"Buyer Address",-1),gt=Object(s["f"])("th",null,"Seller Address",-1),wt=Object(s["f"])("th",null,"Amount",-1),At=Object(s["f"])("th",null,"Fee",-1),kt={class:"text-center mt-4"},vt={key:0,class:"btn btn-primary btn-block",disabled:""};function xt(e,t,n,r,a,o){const i=Object(s["v"])("router-link");return o.loading?(Object(s["q"])(),Object(s["e"])("div",ze,Qe)):a.error?(Object(s["q"])(),Object(s["e"])("div",Xe,[Object(s["f"])("h2",Ze,Object(s["x"])(a.error),1)])):a.alreadyEscrowed?(Object(s["q"])(),Object(s["e"])("div",et,[Object(s["f"])("h2",tt,[nt,Object(s["f"])("i",st,Object(s["x"])(this.orderId),1)]),Object(s["f"])("p",rt,[at,Object(s["h"])(i,{to:"/status?orderId="+a.orderId},{default:Object(s["A"])(()=>[ot]),_:1},8,["to"]),it])])):a.locked?(Object(s["q"])(),Object(s["e"])("div",lt,[Object(s["f"])("h2",dt,[ct,Object(s["f"])("i",ut,Object(s["x"])(this.orderId),1)]),bt])):(Object(s["q"])(),Object(s["e"])("div",mt,[Object(s["f"])("h2",ft,[yt,Object(s["f"])("i",pt,Object(s["x"])(this.orderId),1)]),Object(s["f"])("table",ht,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[Ot,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[jt,Object(s["f"])("td",null,Object(s["x"])(a.buyerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[gt,Object(s["f"])("td",null,Object(s["x"])(a.sellerAddress.toLowerCase()),1)]),Object(s["f"])("tr",null,[wt,Object(s["f"])("td",null,Object(s["x"])(e.formatAmount(a.amount,a.token)),1)]),Object(s["f"])("tr",null,[At,Object(s["f"])("td",null,Object(s["x"])(e.formatAmount(a.fee,a.token)),1)])])]),Object(s["f"])("div",kt,[a.locking?(Object(s["q"])(),Object(s["e"])("button",vt,"Locking funds...")):(Object(s["q"])(),Object(s["e"])("button",{key:1,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.lockFunds())},"Lock "+Object(s["x"])(e.formatAmount(a.totalAmount,a.token)),1))])]))}var Tt={components:{},created(){this.$store.commit("setActiveSection","LockPage"),this.loadParams()},data(){return{orderId:null,buyerAddress:null,buyerHash:null,sellerAddress:null,sellerHash:null,token:null,amount:null,fee:null,totalAmount:null,error:null,locking:!1,locked:!1,alreadyEscrowed:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.buyerAddress=this.$route.query.buyerAddress,this.buyerHash=this.$route.query.buyerHash,this.sellerHash=this.$route.query.sellerHash,this.token=this.getToken(this.$route.query.token),this.amount=this.$route.query.amount,this.fee=this.$route.query.fee,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";if(this.isStringEmpty(this.buyerAddress)||!this.isValidAddress(this.buyerAddress))throw"BuyerAddress not specified. Please, verify your link.";if(this.isStringEmpty(this.buyerHash))throw"BuyerHash not specified. Please, verify your link.";if(this.isStringEmpty(this.sellerHash))throw"SellerHash not specified. Please, verify your link.";if(!this.token)throw"Invalid token specified. Please, verify your link.";if(this.isStringEmpty(this.amount)||!this.isValidAmount(this.amount,this.token.decimals,"1"))throw"Invalid amount. Please, verify your link.";if(this.isStringEmpty(this.fee)||!this.isValidAmount(this.fee,this.token.decimals,"0"))throw"Invalid fee. Please, verify your link.";let e=await B.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();"0"!==t.status?this.alreadyEscrowed=!0:(this.buyerAddress=this.buyerAddress.toLowerCase(),this.sellerAddress=e.walletAddress.toLowerCase(),this.totalAmount=this.toBN(this.amount).add(this.toBN(this.fee))),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async lockFunds(){this.locking=!0;try{let e=await B.getInstance(),t="0x"+this.buyerHash.toLowerCase(),n="0x"+this.sellerHash.toLowerCase();if("RBTC"===this.token.id){let s=[this.orderId,this.buyerAddress,t,n,this.amount,this.fee];await e.contract.methods.escrowRBTC(...s).send({from:e.walletAddress,value:this.totalAmount})}else{if("RIF"!==this.token.id&&"DOC"!==this.token.id)throw"Unsupported token: "+this.token.id;{let s=new e.web3Instance.eth.Contract(w.erc20ABI,this.token.address),r=await s.methods.allowance(e.walletAddress,e.contract._address).call({from:e.walletAddress}),a=await s.methods.balanceOf(e.walletAddress).call({from:e.walletAddress});if(this.toBN(a.toString()).lt(this.totalAmount))throw"Not enough "+this.token.symbol;this.toBN(r.toString()).lt(this.totalAmount)&&await s.methods.approve(e.contract._address,this.toBN(2).pow(this.toBN(255)).toString()).send({from:e.walletAddress});let o=[this.orderId,this.token.address,this.buyerAddress,t,n,this.amount,this.fee];await e.contract.methods.escrowERC20(...o).send({from:e.walletAddress})}}this.locked=!0,this.locking=!1}catch(e){this.locking=!1,this.showError(e)}}}};const Ct=E()(Tt,[["render",xt]]);var It=Ct;const St={key:0,class:"loading_container"},Bt=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),Rt=[Bt],qt={key:1,class:"loading_container"},Et={class:"text-danger"},_t={key:2,class:"loading_container"},$t=Object(s["f"])("h2",{class:"text-success mb-4"},"Release funds to buyer",-1),Lt={class:"text-left",style:{margin:"0 auto"}},Pt=Object(s["f"])("th",null,"Order ID",-1),Nt=Object(s["f"])("th",null,"Timestamp",-1),Ft=Object(s["f"])("th",null,"Buyer address",-1),Dt=Object(s["f"])("th",null,"Amount",-1),Mt={class:"text-center mt-4"},Ht={key:0,class:"btn btn-primary btn-block",disabled:""},Ut={key:1,class:"btn btn-success btn-block",disabled:""},Vt={key:2,class:"btn btn-warning btn-block",disabled:""};function Kt(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",St,Rt)):a.error?(Object(s["q"])(),Object(s["e"])("div",qt,[Object(s["f"])("h2",Et,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",_t,[$t,Object(s["f"])("table",Lt,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[Pt,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[Nt,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[Ft,Object(s["f"])("td",null,Object(s["x"])(a.buyerAddress),1)]),Object(s["f"])("tr",null,[Dt,Object(s["f"])("td",null,Object(s["x"])(a.amount),1)])])]),Object(s["f"])("div",Mt,[a.releasing?(Object(s["q"])(),Object(s["e"])("button",Ht,"Releasing funds...")):a.released?(Object(s["q"])(),Object(s["e"])("button",Ut,"Funds already released to buyer")):a.refunded?(Object(s["q"])(),Object(s["e"])("button",Vt,"Seller has been refunded")):(Object(s["q"])(),Object(s["e"])("button",{key:3,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.release())},"Release "+Object(s["x"])(a.amount),1))])]))}var Yt={name:"HomePage",components:{},created(){this.$store.commit("setActiveSection","ReleasePage"),this.loadParams()},data(){return{orderId:null,timestamp:null,buyerAddress:null,buyerCode:null,amount:null,error:null,releasing:!1,released:!1,refunded:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.buyerCode=this.$route.query.buyerCode,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";if(this.isStringEmpty(this.buyerCode))throw"BuyerCode not specified. Please, verify your link.";let e=await B.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();if("0"===t.status)throw"Order not found. Please, verify your link.";if("2"===t.status)this.released=!0;else if("3"===t.status)this.refunded=!0;else if("1"!==t.status)throw"There was an error fetching details: order status not supported.";this.buyerAddress=t.buyerAddress,this.amount=this.formatOrderAmount(t),this.timestamp=this.formatTimestamp(t.timestamp),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async release(){this.releasing=!0;try{let e=await B.getInstance(),t="0x"+this.buyerCode;await e.contract.methods.releaseToBuyer(this.orderId,t).send({from:e.walletAddress}),this.released=!0,this.releasing=!1,this.showSuccess("Funds released to buyer!")}catch(e){this.releasing=!1,this.showError(e)}}}};const Jt=E()(Yt,[["render",Kt]]);var Wt=Jt;const zt={key:0,class:"loading_container"},Gt=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),Qt=[Gt],Xt={key:1,class:"loading_container"},Zt={class:"text-danger"},en={key:2,class:"loading_container"},tn=Object(s["f"])("h2",{class:"text-success mb-4"},"Refund seller",-1),nn={class:"text-left",style:{margin:"0 auto"}},sn=Object(s["f"])("th",null,"Order ID",-1),rn=Object(s["f"])("th",null,"Timestamp",-1),an=Object(s["f"])("th",null,"Seller address",-1),on=Object(s["f"])("th",null,"Order amount",-1),ln=Object(s["f"])("th",null,"Fee",-1),dn=Object(s["f"])("th",null,"Total",-1),cn={class:"text-center mt-4"},un={key:0,class:"btn btn-primary btn-block",disabled:""},bn={key:1,class:"btn btn-warning btn-block",disabled:""},mn={key:2,class:"btn btn-success btn-block",disabled:""};function fn(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",zt,Qt)):a.error?(Object(s["q"])(),Object(s["e"])("div",Xt,[Object(s["f"])("h2",Zt,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",en,[tn,Object(s["f"])("table",nn,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[sn,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[rn,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[an,Object(s["f"])("td",null,Object(s["x"])(a.sellerAddress),1)]),Object(s["f"])("tr",null,[on,Object(s["f"])("td",null,Object(s["x"])(a.orderAmount),1)]),Object(s["f"])("tr",null,[ln,Object(s["f"])("td",null,Object(s["x"])(a.feeAmount),1)]),Object(s["f"])("tr",null,[dn,Object(s["f"])("td",null,Object(s["x"])(a.totalAmount),1)])])]),Object(s["f"])("div",cn,[a.refunding?(Object(s["q"])(),Object(s["e"])("button",un,"Refunding seller...")):a.released?(Object(s["q"])(),Object(s["e"])("button",bn,"Funds have been released to buyer")):a.refunded?(Object(s["q"])(),Object(s["e"])("button",mn,"Seller already refunded")):(Object(s["q"])(),Object(s["e"])("button",{key:3,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.refund())},"Refund "+Object(s["x"])(a.totalAmount),1))])]))}var yn={name:"HomePage",components:{},created(){this.$store.commit("setActiveSection","RefundPage"),this.loadParams()},data(){return{orderId:null,timestamp:null,sellerAddress:null,sellerCode:null,orderAmount:null,feeAmount:null,totalAmount:null,error:null,refunding:!1,released:!1,refunded:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.sellerCode=this.$route.query.sellerCode,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";if(this.isStringEmpty(this.sellerCode))throw"SellerCode not specified. Please, verify your link.";let e=await B.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();if("0"===t.status)throw"Order not found. Please, verify your link.";if("2"===t.status)this.released=!0;else if("3"===t.status)this.refunded=!0;else if("1"!==t.status)throw"There was an error fetching details: order status not supported.";this.timestamp=this.formatTimestamp(t.timestamp),this.sellerAddress=t.sellerAddress.toLowerCase(),this.orderAmount=this.formatOrderAmount(t),this.feeAmount=this.formatOrderFeeAmount(t),this.totalAmount=this.formatOrderTotalAmount(t),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async refund(){this.refunding=!0;try{let e=await B.getInstance(),t="0x"+this.sellerCode;await e.contract.methods.refundSeller(this.orderId,t).send({from:e.walletAddress}),this.refunded=!0,this.refunding=!1,this.showSuccess("Seller refunded!")}catch(e){this.refunding=!1,this.showError(e)}}}};const pn=E()(yn,[["render",fn]]);var hn=pn;const On={key:0,class:"loading_container"},jn=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),gn=[jn],wn={key:1,class:"loading_container"},An={class:"text-danger"},kn={key:2,class:"loading_container"},vn=Object(s["f"])("h2",{class:"text-success mb-4"},"Release funds to buyer",-1),xn={class:"text-left",style:{margin:"0 auto"}},Tn=Object(s["f"])("th",null,"Order ID",-1),Cn=Object(s["f"])("th",null,"Timestamp",-1),In=Object(s["f"])("th",null,"Buyer address",-1),Sn=Object(s["f"])("th",null,"Amount",-1),Bn={class:"text-center mt-4"},Rn={key:0,class:"btn btn-primary btn-block",disabled:""},qn={key:1,class:"btn btn-success btn-block",disabled:""},En={key:2,class:"btn btn-warning btn-block",disabled:""};function _n(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",On,gn)):a.error?(Object(s["q"])(),Object(s["e"])("div",wn,[Object(s["f"])("h2",An,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",kn,[vn,Object(s["f"])("table",xn,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[Tn,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[Cn,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[In,Object(s["f"])("td",null,Object(s["x"])(a.buyerAddress),1)]),Object(s["f"])("tr",null,[Sn,Object(s["f"])("td",null,Object(s["x"])(a.amount),1)])])]),Object(s["f"])("div",Bn,[a.releasing?(Object(s["q"])(),Object(s["e"])("button",Rn,"Releasing funds...")):a.released?(Object(s["q"])(),Object(s["e"])("button",qn,"Funds already released to buyer")):a.refunded?(Object(s["q"])(),Object(s["e"])("button",En,"Seller has been refunded")):(Object(s["q"])(),Object(s["e"])("button",{key:3,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.release())},"Release "+Object(s["x"])(a.amount),1))])]))}var $n={components:{},created(){this.$store.commit("setActiveSection","AdminReleasePage"),this.loadParams()},data(){return{orderId:null,timestamp:null,buyerAddress:null,amount:null,error:null,releasing:!1,released:!1,refunded:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.buyerCode=this.$route.query.buyerCode,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";let e=await B.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();if("0"===t.status)throw"Order not found. Please, verify your link.";if("2"===t.status)this.released=!0;else if("3"===t.status)this.refunded=!0;else if("1"!==t.status)throw"There was an error fetching details: order status not supported.";this.buyerAddress=t.buyerAddress.toLowerCase(),this.amount=this.formatOrderAmount(t),this.timestamp=this.formatTimestamp(t.timestamp),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async release(){this.releasing=!0;try{let e=await B.getInstance();await e.contract.methods.adminReleaseToBuyer(this.orderId).send({from:e.walletAddress}),this.released=!0,this.releasing=!1,this.showSuccess("Funds released to buyer!")}catch(e){this.releasing=!1,this.showError(e)}}}};const Ln=E()($n,[["render",_n]]);var Pn=Ln;const Nn={key:0,class:"loading_container"},Fn=Object(s["f"])("div",{class:"spinner-border text-primary",role:"status"},[Object(s["f"])("span",{class:"sr-only"})],-1),Dn=[Fn],Mn={key:1,class:"loading_container"},Hn={class:"text-danger"},Un={key:2,class:"loading_container"},Vn=Object(s["f"])("h2",{class:"text-success mb-4"},"Refund seller",-1),Kn={class:"text-left",style:{margin:"0 auto"}},Yn=Object(s["f"])("th",null,"Order ID",-1),Jn=Object(s["f"])("th",null,"Timestamp",-1),Wn=Object(s["f"])("th",null,"Seller address",-1),zn=Object(s["f"])("th",null,"Order amount",-1),Gn=Object(s["f"])("th",null,"Fee",-1),Qn=Object(s["f"])("th",null,"Total",-1),Xn={class:"text-center mt-4"},Zn={key:0,class:"btn btn-primary btn-block",disabled:""},es={key:1,class:"btn btn-warning btn-block",disabled:""},ts={key:2,class:"btn btn-success btn-block",disabled:""};function ns(e,t,n,r,a,o){return o.loading?(Object(s["q"])(),Object(s["e"])("div",Nn,Dn)):a.error?(Object(s["q"])(),Object(s["e"])("div",Mn,[Object(s["f"])("h2",Hn,Object(s["x"])(a.error),1)])):(Object(s["q"])(),Object(s["e"])("div",Un,[Vn,Object(s["f"])("table",Kn,[Object(s["f"])("tbody",null,[Object(s["f"])("tr",null,[Yn,Object(s["f"])("td",null,Object(s["x"])(a.orderId),1)]),Object(s["f"])("tr",null,[Jn,Object(s["f"])("td",null,Object(s["x"])(a.timestamp),1)]),Object(s["f"])("tr",null,[Wn,Object(s["f"])("td",null,Object(s["x"])(a.sellerAddress),1)]),Object(s["f"])("tr",null,[zn,Object(s["f"])("td",null,Object(s["x"])(a.orderAmount),1)]),Object(s["f"])("tr",null,[Gn,Object(s["f"])("td",null,Object(s["x"])(a.feeAmount),1)]),Object(s["f"])("tr",null,[Qn,Object(s["f"])("td",null,Object(s["x"])(a.totalAmount),1)])])]),Object(s["f"])("div",Xn,[a.refunding?(Object(s["q"])(),Object(s["e"])("button",Zn,"Refunding seller...")):a.released?(Object(s["q"])(),Object(s["e"])("button",es,"Funds have been released to buyer")):a.refunded?(Object(s["q"])(),Object(s["e"])("button",ts,"Seller already refunded")):(Object(s["q"])(),Object(s["e"])("button",{key:3,class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=e=>o.refund())},"Refund "+Object(s["x"])(a.totalAmount),1))])]))}var ss={components:{},created(){this.$store.commit("setActiveSection","AdminRefundPage"),this.loadParams()},data(){return{orderId:null,timestamp:null,sellerAddress:null,orderAmount:null,feeAmount:null,totalAmount:null,error:null,refunding:!1,released:!1,refunded:!1}},watch:{activeConnection(){this.loading||this.loadParams()}},computed:{loading(){return this.$store.state.loading},activeConnection(){return this.$store.state.activeConnection}},methods:{async loadParams(){this.$store.commit("setLoading",!0);try{if(this.orderId=this.$route.query.orderId,this.isStringEmpty(this.orderId))throw"OrderID not specified. Please, verify your link.";let e=await B.getInstance(),t=await e.contract.methods.orderById(this.orderId).call();if("0"===t.status)throw"Order not found. Please, verify your link.";if("2"===t.status)this.released=!0;else if("3"===t.status)this.refunded=!0;else if("1"!==t.status)throw"There was an error fetching details: order status not supported.";this.timestamp=this.formatTimestamp(t.timestamp),this.sellerAddress=t.sellerAddress.toLowerCase(),this.orderAmount=this.formatOrderAmount(t),this.feeAmount=this.formatOrderFeeAmount(t),this.totalAmount=this.formatOrderTotalAmount(t),this.$store.commit("setLoading",!1)}catch(e){this.error=e,this.$store.commit("setLoading",!1)}},async refund(){this.refunding=!0;try{let e=await B.getInstance();await e.contract.methods.adminRefundSeller(this.orderId).send({from:e.walletAddress}),this.refunded=!0,this.refunding=!1,this.showSuccess("Seller refunded!")}catch(e){this.refunding=!1,this.showError(e)}}}};const rs=E()(ss,[["render",ns]]);var as=rs;const os={class:"loading_container"},is=Object(s["f"])("h2",{class:"text-danger"},"Page not found",-1),ls=[is];function ds(e,t,n,r,a,o){return Object(s["q"])(),Object(s["e"])("div",os,ls)}var cs={created(){this.$store.commit("setActiveSection",""),this.$store.commit("setLoading",!1)},components:{},data(){return{}},methods:{}};const us=E()(cs,[["render",ds]]);var bs=us;const ms=[{path:"",component:Oe},{path:"/status",component:We},{path:"/lock",component:It},{path:"/release",component:Wt},{path:"/refund",component:hn},{path:"/adminRelease",component:Pn},{path:"/adminRefund",component:as},{path:"/rsk",component:Oe},{path:"/rsk/status",component:We},{path:"/rsk/lock",component:It},{path:"/rsk/release",component:Wt},{path:"/rsk/refund",component:hn},{path:"/rsk/adminRelease",component:Pn},{path:"/rsk/adminRefund",component:as},{path:"/:catchAll(.*)",component:bs}];var fs=ms,ys={isString(e){return"string"===typeof e||e instanceof String},isEmpty(e){return void 0===e||null===e||!this.isString(e)||0===e.trim().length},removeHexPrefix(e){return e.replace(/^0x/,"")},addHexPrefix(e){return"0x"+this.removeHexPrefix(e)}},ps=(n("d9e2"),n("5ba3")),hs=n.n(ps),Os={isValidAmount(e,t,n,s){if(!ys.isString(e)||ys.isEmpty(e))return!1;const r="^(0|[1-9]\\d*)(\\.\\d{0,"+t+"})?$";if(!1===new RegExp(r).test(e))return!1;if(!ys.isEmpty(n))try{n=this.toBN(n)}catch(a){n=null}if(!ys.isEmpty(s))try{s=this.toBN(s)}catch(a){s=null}try{let t=this.toBN(e);if(n&&t.lt(n))throw"Value should be >= "+n.toString();if(s&&t.le(s))throw"Value should be <= "+s.toString()}catch(a){return!1}return!0},toBaseUnit(e,t){if(!ys.isString(e))throw new Error("Pass strings to prevent floating point precision issues.");const n="^(0|[1-9]\\d*)(\\.\\d{0,"+t+"})?$";if(!1===new RegExp(n).test(e))throw new Error("INVALID_NUMBER");const s=hs.a.BN,r=new s(10),a=r.pow(new s(t));let o="-"===e.substring(0,1);if(o&&(e=e.substring(1)),"."===e)throw new Error(`Invalid value ${e} cannot be converted to base unit with ${t} decimals.`);let i=e.split(".");if(i.length>2)throw new Error("Too many decimal points");let l=i[0],d=i[1];if(l||(l="0"),d||(d="0"),d.length>t)throw new Error("Too many decimal places");while(d.length<t)d+="0";l=new s(l),d=new s(d);let c=l.mul(a).add(d);return o&&(c=c.neg()),new s(c.toString(10),10)},toBN(e){return new hs.a.BN(e)},exp(e,t){return this.toBN(e).pow(this.toBN(t))},formatUnit(e,t){e=this.toBN(e);let n=new hs.a.BN(10).pow(new hs.a.BN(t)),s=e.mod(n).toString(10);while(s.length<t)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];let r=e.div(n).toString(10);e=`${r}.${s}`;let a=t-s.length;while(a>0)a--,e+="0";return e},toBigInt(e){return BigInt(e)}},js={isValidAddress(e){return hs.a.isAddress(e)}},gs={formatDuration(e){if(!e)return"-";let t=Number(e),n=Math.floor(t/86400),s=Math.floor(t%86400/3600),r=Math.floor(t%3600/60),a=Math.floor(t%60),o=n>0?n+(1==n?" day, ":" days, "):"",i=s>0?s+(1==s?" hour, ":" hours, "):"",l=r>0?r+(1==r?" minute, ":" minutes, "):"",d=a>0?a+(1==a?" second":" seconds"):"",c=o+i+l+d;return c.endsWith(", ")&&(c=c.substring(0,c.length-2)),c},formatTimestamp(e){return e?new Date(1e3*Number(e)).toLocaleString():"-"}};const ws=window["$"];function As(e){let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n].address]=e[n]);return t}let ks=As(w.tokens["production"]);var vs={methods:{isStringEmpty(e){return ys.isEmpty(e)},isValidAddress(e){return js.isValidAddress(e)},isValidAmount(e,t,n){return Os.isValidAmount(e,t,n)},toBN(e){return new hs.a.BN(e)},toBytes32(e){return hs.a.fromAscii(e)},getToken(e){return e&&(e=String(e).toUpperCase()),w.tokens["production"][e]},getTokenByAddress(e){return ks[e.toLowerCase()]},formatAddress(e){return(e.substring(0,7)+"..."+e.substring(e.length-5)).toLowerCase()},formatTimestamp(e){return gs.formatTimestamp(e)},formatAmount(e,t){if(!e)return null;if(!t)return null;let n=Os.formatUnit(e.toString(),t.decimals)+" "+t.symbol;return n},formatOrderAmount(e){let t=this.formatAmount(this.toBN(e.amount),this.getTokenByAddress(e.tokenContractAddress));return t||null},formatOrderFeeAmount(e){let t=this.formatAmount(this.toBN(e.fee),this.getTokenByAddress(e.tokenContractAddress));return t||null},formatOrderTotalAmount(e){let t=this.toBN(e.fee).add(this.toBN(e.amount)),n=this.formatAmount(t,this.getTokenByAddress(e.tokenContractAddress));return n||null},showError(e){let t;console.log(e),t=e.data&&e.data.data&&e.data.data.message?e.data.data.message:e.message?e.message:e,this.$store.commit("setLoading",!1),ws("#errorMsg").text(t),ws("#errorModal").modal("show")},showSuccess(e){ws("#successMsg").text(e),ws("#successModal").modal("show")}}};if(localStorage)try{localStorage.removeItem("walletconnect")}catch(Is){console.log(Is)}const xs=Object(a["a"])(D),Ts=Object(r["a"])({history:Object(r["b"])(),routes:fs}),Cs=Object(s["c"])($);Cs.use(Ts),Cs.use(xs),Cs.mixin(vs),Cs.mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},a840:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')}});
//# sourceMappingURL=app.23170370.js.map